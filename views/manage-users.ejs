<%- include ('layouts/header') %>

    <div class="container">
        <div class="row my-4">
            <div class="col-lg-12">
                <!-- <div class="alert alert-dismissable fade show alert-<%# message.type %>" role="alert">
                    <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
                    <strong><%# message.message %></strong>
                </div> -->

                <!-- ******************* -->
                <div class="table-responsive">
                    <% if(users != '') { %>
                        <table class="table" id="myTable">
                            <thead>
                                <tr class="table-dark">
                                    <th>id</th>
                                    <th>Name</th>
                                    <th>Role</th>
                                    <th>Gender</th>
                                    <th>Age</th>
                                    <th>Grade/Level</th>
                                    <th>Section</th>
                                    <th>Subjects</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody class="table-group-divider">
                                <% users.forEach((user, index)=> { %>
                                    <tr class="align-middle">
                                        <td>
                                            <%= index %>
                                        </td>

                                        <td>
                                            <a href="/admin/user/<%= user._id %> ">
                                                <%= user.name %>
                                            </a>
                                        </td>
                                        <td>
                                            <%= user.role %>
                                        </td>
                                        <td>
                                            <%= user.gender %>
                                        </td>
                                        <td>
                                            <%= user.age %>
                                        </td>

                                        <td>
                                            <%= user.grlvl %>
                                        </td>
                                        <td>
                                            <%= user.section %>
                                        </td>
                                        <td>
                                            <%= user.subjects %>
                                        </td>
                                        <td>
                                            <a href="/admin/user/update/<%= user._id %>/" class="text-success"><i class="fas fa-edit fa-lg mx-1"></i></a>

                                            <a href="/admin/user/delete/<%= user._id %>" class="text-danger"><i class="fas fa-trash fa-lg mx-1"></i></a>
                                        </td>
                                    </tr>
                                    <% }) %>
                            </tbody>
                        </table>
                        <% } else { %>
                            <h1 class="text-center text-secondary mt-5">No users found in the database!</h1>
                            <% } %>
                                <!-- ToDo: 1 file for updating users, 2 routes for update and delete users -->
                </div>
            </div>
        </div>
    </div>

    <%- include ('layouts/footer') %>